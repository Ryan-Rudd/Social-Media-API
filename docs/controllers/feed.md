# Feed Controller Documentation

The `feedController.js` file is responsible for retrieving posts for a user's feed in the social media application. The feed is generated by either showing posts from the users the authenticated user follows or, if the user follows no one, displaying the most popular posts from the last 3 days.

## Overview

This controller provides a method to retrieve the user's personalized feed:
1. **If the user follows other users**: The feed will display the newest posts from the users they follow.
2. **If the user follows no one**: The feed will display the hottest posts from the last 3 days, sorted by likes.

## Function

### 1. `getUserFeed(req, res)`

#### Description
Retrieves the feed for the authenticated user. The feed is personalized based on the people the user follows, or defaults to popular posts from the last 3 days if they follow no one.

#### Flow
1. **User Lookup**: The authenticated user is found using their ID (`req.user.id`).
2. **Post Retrieval**:
   - If the user follows others, posts from those followed users are retrieved, sorted by the most recent.
   - If the user follows no one, the system retrieves the hottest posts from the last 3 days, sorted by the number of likes.
3. **Response**: A success response is sent back with the posts, limited to 50 results.

#### Parameters
- `req` (*Object*): The request object containing the authenticated user's information.
- `res` (*Object*): The response object used to send the HTTP response.

### Logic
- **Followed Users' Posts**: The feed retrieves posts from the `author` field, matching user IDs the authenticated user follows. These posts are sorted by `createdAt` to show the newest ones first.
- **Popular Posts Fallback**: If the user follows no one, posts from the last 3 days are fetched and sorted by the number of likes. The most popular posts appear first.

### Error Handling
- **404 User Not Found**: If the user is not found in the database, a `404 User not found` error is returned.
- **500 Server Error**: If any issues occur during the database query or post retrieval, a `500 Server Error` is returned, and the error is logged using the `logger` utility.

### Security Considerations
- **Authentication**: The function assumes the use of an authentication middleware that attaches the authenticated user to `req.user`. Without proper authentication, unauthorized users should not be able to access the feed.
- **Rate Limiting**: To avoid abuse, rate limiting can be applied to the feed routes, limiting how often a user can refresh their feed in a short period.
